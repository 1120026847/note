<!-- 1) 先引入带 auth 的 SDK（full 包最省事） -->
<script src="//static.cloudbase.net/cloudbase-js-sdk/2.10.0/cloudbase.full.js"></script>

<script>
// 2) 初始化
const app = cloudbase.init({
  env: "molijun-0gtahyghc6271173",
  // clientId: "若控制台给了 clientId 就填上"
});

// 3) 别叫 auth，避免冲突；并且挂到 window，给行内/全局 handler 用
const cbAuth = app.auth({ persistence: "local" });
window.cbAuth = cbAuth;

// 4) 注册/登录函数——只用 cbAuth，不使用名为 auth 的变量
async function handleRegister(email, password) {
  try {
    await cbAuth.signUpWithEmailAndPassword(email, password);
    alert("注册成功");
  } catch (e) {
    console.error("[signUp error]", e);
    alert(`${e.code || "ERR"}: ${e.message || "注册失败"}`);
  }
}

async function handleLogin(email, password) {
  try {
    await cbAuth.signInWithEmailAndPassword(email, password);
    alert("登录成功");
  } catch (e) {
    console.error("[signIn error]", e);
    alert(`${e.code || "ERR"}: ${e.message || "登录失败"}`);
  }
}

// 如果你有“检查登录态”的逻辑，未登录时报 unauthenticated 是正常的
</script>
